
<link rel="import" href="../../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../../bower_components/paper-input/paper-input.html">
<link rel="import" href="../../bower_components/paper-card/paper-card.html">
<link rel="import" href="../../bower_components/iron-icons/av-icons.html">
<link rel="import" href="../../bower_components/paper-dialog/paper-dialog.html">


<link rel="import" href="../measurements/blaktip-temperature.html">
<link rel="import" href="../measurements/blaktip-humidity.html">
<link rel="import" href="../shared-styles.html">


<dom-module id="blaktip-room">
  <template>
    <style include="shared-styles">
      paper-card.white {
      --paper-card-header-color: #fff;
      position: relative;
      }

      .formatTable {
        align-self: center;s
        width: 250px;
        border-spacing: 40px 0px;
      }
    </style>

    <paper-card heading="[[name]]" image="../images/reef4.png" alt="House" class="white card" style="margin-bottom:8px;">
      <div class="card-actions">
      <table class="formatTable">
      <th colspan="2" align="left">Critical Measurements</th>
      <tr><td>
         <blaktip-temperature id="temperature" temperature="[[temperature]]"></blaktip-temperature> 
         </td><td>
         <blaktip-humidity humidity="[[humidity]]" id="humidity"></blaktip-humidity> 
         </td></tr>
       </table>
       <div align="right">
         <paper-icon-button on-tap="_openCamFeedDialog" icon="av:videocam"></paper-icon-button>
         <paper-icon-button on-tap="_openLightDialog" icon="lightbulb-outline"></paper-icon-button>
         <paper-icon-button on-tap="_openEditDialog" icon="create"></paper-icon-button>
         <paper-icon-button on-tap="_openDeleteDialog" icon="delete"></paper-icon-button>
         <paper-icon-button on-tap="_openSettingsDialog" icon="icons:more-vert"><paper-icon-button>
       </div>

       
       
       <paper-dialog id="settingsDialog" modal>
       <h1>Room Settings</h1>
       <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
       <div class="buttons">
       <paper-button dialog-confirm autofocus>Tap me to close</paper-button>
       </div>
       </paper-dialog>

       <paper-dialog id="deleteDialog" modal>
       <h1>Delete</h1>
       <p>Are you sure you want to delete this room from Blaktip?</p>
       <div class="buttons">
       <paper-button dialog-confirm autofocus>Tap me to close</paper-button>
       </div>
       </paper-dialog>

       <paper-dialog id="editDialog" modal>
       <h1>Edit Room</h1>
       <p>EDIT FORM HERE</p>
       <div class="buttons">
       <paper-button dialog-confirm autofocus>Tap me to close</paper-button>
       </div>
       </paper-dialog>

       <paper-dialog id="lightingDialog" modal>
       <h1>Lighting in Room</h1>
       <p>LIGHTING CONTROLS HERE</p>
       <div class="buttons">
       <paper-button dialog-confirm autofocus>Tap me to close</paper-button>
       </div>
       </paper-dialog>

       <paper-dialog id="camFeedDialog" modal>
       <h1>Web Camera Feed</h1>
       <p>FEED HERE: [[feed]]</p>
       <div class="buttons">
       <paper-button dialog-confirm autofocus>Tap me to close</paper-button>
       </div>

    </paper-card>
 


  </template>
  <script>
    Polymer({
      is: 'blaktip-room',

      properties: {
        editable: {
          type: Boolean,
          reflectToAttribute: true,
          value: false
        },

        name: {
          type: String,
          notify: true,
          value: ''
        },

        humidity: {
          type: Number,
          notify: true,
          value: 0
        },

        temperature: {
          type: Number,
          notify: true,
          value: 0
        },

        feed: {
          type: String,
          notify: true,
          value: ''
        },

        lastUpdated: {
          type: Number,
          value: 0
        }
      },

      listeners: {
        input: 'onInput'
      },

      observers: [
        'updateTextContent(name, humidity, temperature, feed)'
      ],

      _openSettingsDialog: function() {
            this.$.settingsDialog.open();
      },

      _openDeleteDialog: function() {
            this.$.deleteDialog.open();
      },

      _openEditDialog: function() {
            this.$.editDialog.open();
      },

      _openCamFeedDialog: function() {
            this.$.camFeedDialog.open();
      },

      _openLightDialog: function() {
            this.$.lightingDialog.open();
      },


      emptyClass(content, editable) {
        if (editable) {
          return !content ? 'placeholder' : '';
        } else {
          return !content ? 'hidden' : '';
        }
      },

      propertiesAreEmpty() {
        for (var i = 0; i < arguments.length; ++i) {
          if (arguments[i]) {
            return false;
          }
        }
        return true;
      },

      updateTextContent(name, humidity, temperature, feed, lastUpdated) {
        console.log(arguments);
        // this.$.name.textContent = name;
        // this.$.humidity.textContent = humidity;
        // this.$.temperature.textContent = temperature;
        // this.$.feed.textContent = feed;
      },

      onInput() {
        this.async(function() {
          this.name = this.$.name.innerText;
          this.humidity = this.$.humidity.innerText;
          this.temperature = this.$.temperature.innerText;
          this.feed = this.$.videoLink.feed;
        });
      }
    })
  </script>
</dom-module>
